<div convoy-modal position="full" [id]="'configureProjectForm'" [title]="projectType === 'outgoing' ? 'Configure Outgoing Project' : 'Configure Incoming Project'" (closeModal)="cancel()">
	<div modalBody class="pb-60px">
		<convoy-loader *ngIf="showLoader"></convoy-loader>

		<ng-container *ngIf="projectType === 'incoming'">
			<h3 class="font-semibold mt-40px">Create your first source</h3>
			<p class="text-14 text-grey-60 mt-6px max-w-[634px]">
				A source on Convoy represents your event senders, the providers and services you’ll like to receive events from. On creating a source, you’ll get a unique URL to listen to event into Convoy which can then be routed to any endpoint of choice
			</p>
			<convoy-create-source></convoy-create-source>
		</ng-container>

		<h3 class="font-semibold mt-40px">Create your first endpoint</h3>
		<p class="text-14 text-grey-60 mt-6px max-w-[634px]">HTTP Endpoint is the destination of events from your sources. Create an endpoint to receive events from your configured sources, including through Convoy API.</p>
		<convoy-create-endpoint>
			<hr class="border-t border-grey-20 my-24px" />
			<convoy-toggle label="Automatically subscribe endpoint to all events sent?" (onChange)="automaticSubscription = !automaticSubscription" [isChecked]="automaticSubscription"></convoy-toggle>
		</convoy-create-endpoint>

		<div [ngClass]="{ 'h-0 invisible': automaticSubscription }">
			<h3 class="font-semibold mt-60px">Create your first subscription</h3>
			<p class="text-14 text-grey-60 mt-6px max-w-[634px]">Subscriptions enable you to subscribe endpoints to events from any source, with extra configurations like event filters and retry logic</p>

			<convoy-create-subscription (onAction)="privateService.activeProjectDetails?.type === 'incoming' ? showSourceUrl() : onProjectOnboardingComplete()"></convoy-create-subscription>
		</div>

		<div class="flex justify-end mt-32px">
			<button convoy-button fill="outline" type="button" class="mr-16px transition-all duration-300 hover:text-danger-100 hover:border-danger-100" (click)="cancel()">Cancel</button>
			<button convoy-button [disabled]="isLoading" (click)="saveProjectConfig()">
				Save and Proceed
				<svg width="24" height="24" class="ml-8px fill-white-100">
					<use xlink:href="#arrow-right-icon"></use>
				</svg>
			</button>
		</div>
	</div>

	<div convoy-modal position="right" *ngIf="showSourceDetails">
		<div class="p-20px min-h-[80vh] flex flex-col justify-center items-center" modalBody>
			<img src="/assets/img/success.gif" loop="1" alt="Success gif" class="h-140px w-140px rounded-[100%] mb-16px" />
			<h2 class="font-semibold text-center mb-8px">Source URL</h2>
			<p class="text-center text-14 mb-48px">URL for receiving events from your configured source.</p>
			<div class="bg-[#F7F9FC] border border-primary-500 h-48px flex items-center justify-between p-16px rounded-4px w-full mb-40px">
				<span class="max-w-[300px] overflow-hidden text-14 text-grey-100 whitespace-nowrap text-ellipsis">{{ newSource.url }}</span>
				<convoy-copy-button [text]="newSource.url || ''" notificationText="Source URL has been copied to clipboard!"></convoy-copy-button>
			</div>
			<button convoy-button (click)="onProjectOnboardingComplete()" class="px-82px">Done</button>
		</div>
	</div>
</div>
